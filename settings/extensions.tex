%!TEX root = ../main.tex

% Define syntax highlighting for yaml files
\newcommand\colonstyle{\color{red}\mdseries}
\newcommand\keystyle{\color{black}\bfseries}
\newcommand\valuestyle{\color{blue}\mdseries}

% The following block defines new languages
\makeatletter

% for yaml files.
\newcommand\ProcessThreeDashes{\llap{\color{cyan}\mdseries-{-}-}}

% Define highlighting for yaml
\newcommand\language@yaml{yaml}
\expandafter\expandafter\expandafter\lstdefinelanguage
\expandafter{\language@yaml}
{
    keywords={true,false,null,y,n},
    keywordstyle=\color{keywordcolor},
    commentstyle=\color{commentcolor},
    stringstyle=\color{stringcolor},
    sensitive=false,
    comment=[l]{\#},
    morecomment=[s]{/*}{*/},
    moredelim=[l][\color{orange}]{\&},
    moredelim=[l][\color{magenta}]{*},
    moredelim=**[il][\colonstyle{:}\valuestyle]{:},   % switch to value style at :
    morestring=[b]',
    morestring=[b]",
    literate =    {---}{{\ProcessThreeDashes}}3
                {>}{{\textcolor{red}\textgreater}}1     
                {|}{{\textcolor{red}\textbar}}1 
                {\ -\ }{{\mdseries\ -\ }}3,
}
\lst@AddToHook{EveryLine}{\ifx\lst@language\language@yaml\keystyle\fi}

% Define highlighting for dockerfiles
\newcommand\language@docker{docker}
\expandafter\expandafter\expandafter\lstdefinelanguage
\expandafter{\language@docker}
{
    keywords={FROM, RUN, CMD, LABEL, MAINTAINER, EXPOSE, ENV, ADD, COPY, ENTRYPOINT, VOLUME, USER, WORKDIR, ARG, ONBUILD, STOPSIGNAL, HEALTHCHECK, SHELL, User},
    keywordstyle=\color{keywordcolor},
    commentstyle=\color{commentcolor},
    stringstyle=\color{stringcolor},
    sensitive=true,
    comment=[l]{\#},
    morestring=[b]',
    morestring=[b]"
}

% switch to key style at EOL
\lst@AddToHook{EveryLine}{\ifx\lst@language\language@docker\keystyle\fi}
\makeatother